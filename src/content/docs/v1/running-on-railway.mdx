---
title: 在 Railway 上运行
---

[Railway](https://railway.app/) 正在尝试为人类构建软件开发基础设施。其核心理念是构建软件应该是“取所需，留所弃”，当前的软件开发工具对于现今的开发者而言过于复杂，更不用说未来的开发者了。因此，Railway 处理您的构建、部署、扩展和基础设施管理；从开发到生产！

Railway 提供免费的托管服务，允许您一键部署 Umami 并设置 PostgreSQL 数据库，这样您就可以拥有自己的自托管版本。

## 设置网站和数据库

### Railway 按钮（推荐）

[![在 Railway 上部署](https://railway.app/button.svg)](https://railway.app/new/template/umami-analytics)

点击上面的按钮来部署您的 Umami 网站自托管版本，同时自动生成 PostgreSQL 数据库。

您现在应该能够访问您的 Umami 仪表盘，并设置您想要跟踪分析的网站。

您可以通过运行 `railway open` 在项目仪表盘中找到 URL。

## 从分叉的仓库在 Railway 上运行

上述方法是最快和最简单的方式在 Railway 上让 Umami 开始运行。然而，这会在您的 GitHub 账户下创建一个带有单个提交的新仓库。您可能希望使用分叉的仓库，以便方便地从 Umami 源仓库接收更新（或贡献 Pull 请求）。

### 设置 Railway 项目

- 分叉 [Umami 仓库](https://github.com/umami-software/umami)。
- 创建一个与 GitHub 连接的 [Railway](https://railway.app/) 账户。
- 如果您愿意，可以在链接 GitHub 账户时仅授予 Railway 访问您的 Umami 分叉仓库的权限。
- 从您的 Railway 仪表盘中，点击 **新项目 > 从 GitHub 仓库部署**。
- 选择您的分叉 Umami 仓库并选择 **master** 分支。
- 添加一个变量 `PORT`，将其值设置为有效的端口号（例如：`3000`）。点击 **添加**。
- 添加第二个变量 `DATABASE_TYPE`，将其值设置为 `postgres`。点击 **添加**。
- 添加第三个变量 `HOSTNAME`，将其值设置为 `${{ RAILWAY_STATIC_URL }}`。点击 **添加**。
- 点击 **部署**。

这个初始部署将失败，直到您按照其余步骤进行操作。

### 数据库和部署

- 关闭设置侧边栏，点击 **新建**，点击 **数据库**，选择 **添加 PostgreSQL**。

添加数据库应该会触发重新部署，点击应用链接应该能让您进入 Umami 实例的登录页面。

### 故障排除

如果 Railway 在您的仪表盘中显示 `您的项目没有部署`：

1. 在左下角选择 `在本地设置您的项目`。

2. 在 `umami` 根目录中，按照弹出窗口中的指示操作。

- 使用 `railway login` 登录到您的 Railway 帐户。
- 使用 `railway link` 关联您的项目。
- 使用 `railway open` 打开您的项目仪表盘。
- 使用 `railway up` 上传和部署您的项目。

3. 从 [登录](/docs/login) 步骤开始，遵循 **入门** 指南，并确保更改默认密码。

### 注意事项

- 在这里阅读更多关于 [添加网站](https://umami.is/docs/add-a-website) 和 [收集数据](https://umami.is/docs/collect-data) 的信息。