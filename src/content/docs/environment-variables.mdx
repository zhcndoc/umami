---
title: 环境变量
---

您可以使用环境变量配置 Umami。它们与您的 `DATABASE_URL` 一起放入同一个 `.env` 文件中。

---

## 运行时变量

运行时变量在 Umami 运行时被识别。你可以在启动应用程序之前设置环境变量。

**APP_SECRET = &lt;随机字符串&gt;**

安装的唯一值。

**CLIENT_IP_HEADER = &lt;头名称&gt;**

要检查客户端 IP 地址的 HTTP 头。当你在使用非标准头的代理之后时，这很有用。

**CLOUD_MODE = 1**

禁用了 `users`、`teams` 和 `websites` 设置页面。

**COLLECT_API_ENDPOINT = &lt;API 端点&gt;**

允许你将指标发送到与默认的 `/api/send` 不同的位置。这有助于避免某些[广告拦截器](/docs/guides/bypass-ad-blockers)。

**CORS_MAX_AGE = &lt;秒数&gt;**

CORS 预检应持续多少秒。默认为 24 小时。

**DATABASE_URL = &lt;连接字符串&gt;**

数据库的连接字符串。这是唯一必需的变量。

**DEBUG = &lt;调试值&gt;**

应用程序特定区域的控制台日志。值包括 `umami:auth`、`umami:clickhouse`、`umami:kafka`、`umami:middleware` 和 `umami:prisma`。

**DISABLE_BOT_CHECK = 1**

默认情况下，统计数据中不包含机器人。这会禁用对机器人的检查。

**DISABLE_LOGIN = 1**

禁用应用程序的登录页面。

**DISABLE_UPDATES = 1**

禁用 Umami 的新版本检查。

**DISABLE_TELEMETRY = 1**

Umami 在收集完全匿名的遥测数据以帮助改进应用程序。如果你不想参与，可以选择禁用此功能。

**ENABLE_TEST_CONSOLE = 1**

启用内部测试页面 `{host}/console`。需要管理员访问权限。用户可以手动触发对其网站的页面访问和事件。

**HOSTNAME = &lt;主机名&gt;** / **PORT = &lt;端口号&gt;**

如果你在需要绑定特定主机名或端口的环境中运行，例如 Heroku，你可以添加这些变量，并使用 `npm run start-env` 而不是 `npm start` 启动应用程序。

**IGNORE_IP = &lt;IP 地址或范围&gt;**

你可以提供逗号分隔的 IP 地址和范围列表，以排除在数据收集之外。

**LOG_QUERY = 1**

如果在开发模式下运行，这将将数据库查询记录到控制台以进行调试。

**PRIVATE_MODE = 1**

禁用所有外部网络调用。请注意，这也会禁用所有网站图标，因为它们来自 duckduckgo.com。

**REMOVE_TRAILING_SLASH = 1**

删除所有传入 URL 的末尾斜杠。

**TRACKER_SCRIPT_NAME = &lt;脚本名称&gt;**

允许你为跟踪器脚本分配一个与默认值 `script.js` 不同的自定义名称。这有助于避免某些[广告拦截器](/docs/guides/bypass-ad-blockers)。

不需要使用 `.js` 扩展名。该值也可以是你选择的任何路径，例如 `/path/to/tracker`。

---

## 构建时变量

构建时变量仅在构建过程中被识别。这也包括构建自定义 Docker 镜像。你需要在构建应用程序之前设置环境变量。

**ALLOWED_FRAME_URLS = &lt;urls&gt;**

允许在 iframe 中托管应用程序的 URL 列表，用空格分隔。

**BASE_PATH = &lt;path&gt;**

如果想在一个子目录下托管 Umami。你可能需要更新反向代理设置以正确处理 BASE_PATH 前缀。

**DATABASE_TYPE = &lt;postgresql | mysql&gt;**

要使用的数据库类型。这仅适用于 Docker 构建。

**FORCE_SSL = 1**

这将在所有请求中发送 HTTP `Strict-Transport-Security` 响应头。参见 [https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security)。

**SKIP_DB_CHECK = 1**

跳过构建过程中的 `check-db` 步骤。用于 Docker 构建。
