---
title: 用户
---

用户管理相关的操作。

**端点**

```text
POST /api/users
GET /api/admin/users
POST /api/users/:userId
GET /api/users/:userId
DELETE /api/users/:userId
GET /api/users/:userId/websites
GET /api/users/:userId/teams
```

---

## POST /api/users

创建一个用户。

**参数**

- `username`: (字符串) 用户的用户名。
- `password`: (字符串) 用户的密码。
- `role`: (布尔值) 确定用户访问权限，`admin` 或 `user`。

**示例响应**

```json
{
  "id": "1a457e1a-121a-11ee-be56-0242ac120002",
  "username": "umami",
  "role": "admin",
  "createdAt": "2023-04-13T20:22:55.756Z"
}
```

---

## GET /api/admin/users

返回所有用户。需要管理权限。

**参数**

无

**示例响应**

```json
[
  {
    "id": "1a457e1a-121a-11ee-be56-0242ac120002",
    "username": "umami",
    "role": "admin",
    "createdAt": "2023-04-13T20:22:55.756Z"
  }
]
```

---

## GET /api/users/:userId

根据 ID 获取用户。

**参数**

无

**示例响应**

```json
{
  "id": "1a457e1a-121a-11ee-be56-0242ac120002",
  "username": "umami",
  "role": "admin"
}
```

---

## POST /api/users/:userId

更新一个用户。

**参数**

- `username`: (可选字符串) 用户的用户名。
- `password`: (可选字符串) 用户的密码。
- `role`: (可选字符串) 确定用户访问权限，`admin` 或 `user`。

**示例响应**

```json
{
  "id": "1a457e1a-121a-11ee-be56-0242ac120002",
  "username": "umami",
  "role": "admin",
  "createdAt": "2023-04-13T20:22:55.756Z"
}
```

---

## DELETE /api/users/:userId

删除一个用户。

**参数**

无

**示例响应**

```
ok
```

---

## GET /api/users/:userId/websites

获取用户拥有的所有网站。

**参数**

- `query`: (可选字符串) 搜索文本。
- `page`: (可选数字，默认 1) 确定页码。
- `pageSize`: (可选字符串) 确定返回多少结果。
- `orderBy`: (可选字符串，默认 `name`) 按列名排序。

**示例响应**

```json
[
  {
    "id": "02d89813-7a72-41e1-87f0-8d668f85008b",
    "userId": "1a457e1a-121a-11ee-be56-0242ac120002",
    "domain": "mywebsite.com",
    "name": "我的网站",
    "shareId": null,
    "createdAt": "2023-04-10T23:06:44.250Z",
    "deletedAt": null,
    "resetAt": null,
    "updatedAt": null
  }
]
```

---

## GET /api/users/:userId/teams

获取用户拥有的所有团队。

**参数**

- `query`: (可选字符串) 搜索文本。
- `page`: (可选数字，默认 1) 确定页码。
- `pageSize`: (可选字符串) 确定返回多少结果。
- `orderBy`: (可选字符串，默认 `name`) 按列名排序。

**示例响应**

```json
[
  {
    "id": "02d89813-7a72-41e1-87f0-8d668f85008b",
    "name": "我的团队",
    "createdAt": "2023-04-10T23:06:44.250Z",
    "deletedAt": null,
    "updatedAt": null
  }
]
```