---
title: 在 Railway 上运行
---

# 在 Railway 上运行

[Railway](https://railway.app/) 正在尝试为软件开发构建人性化的基础设施。它的核心理念是构建软件应该是 "取你所需，放下你不需要的"，而当前的软件开发工具对于当前一代开发人员来说已经太复杂了，更不用说接下来的一代开发人员了。因此，Railway 处理你的构建、部署、扩展和基础设施的管理；从开发到生产！

Railway 提供了免费的托管服务，允许你部署 Umami 并设置一个 PostgreSQL 数据库，这样你就可以轻松地拥有自己托管的 Umami 版本。

## 设置网站和数据库

### Railway 按钮（推荐）

[![在 Railway 上部署](https://railway.app/button.svg)](https://railway.app/new/template/umami-analytics)

点击上面的按钮，部署你自己托管的 Umami 网站和一个自动配置的 PostgreSQL 数据库。

现在你应该能够访问 Umami 仪表盘，并设置你想要跟踪分析的站点。

你可以在项目仪表盘中找到 URL，运行 `railway open` 命令访问。

## 从 forked 仓库上在 Railway 上运行

上述方法是在 Railway 上快速简便地运行 Umami 的方法。然而，这将在你的 GitHub 账户下创建一个新仓库，并且只有一个提交记录。你可能希望使用一个 forked 仓库，以便能够通过 GitHub 方便地从 Umami 源仓库接收更新（或贡献拉取请求）。

### 设置 Railway 项目

- Fork [Umami 仓库](https://github.com/umami-software/umami)。
- 在 [Railway](https://railway.app/) 上创建一个与 GitHub 连接的账户。
- 如果你愿意，你可以在链接 GitHub 账户时，只给 Railway 允许访问你的 Umami forked 仓库的权限。
- 在仪表盘页面点击 **新建项目 > 从仓库部署**。
- 选择 forked 的 Umami 仓库，并选择 **master** 分支。
- 添加第二个变量名为 `PORT`，将其值设置为有效的端口号（例如：`3000`）。点击 **添加**。
- 添加第三个变量名为 `DATABASE_TYPE`，将其值设置为 `postgres`。点击 **添加**。
- 添加第四个变量名为 `HOSTNAME`，将其值设置为 `0.0.0.0`。点击 **添加**。
- 点击 **部署**。

在你执行下面的步骤之前，初始部署将会失败。

### 数据库和部署

- 关闭设置侧边栏，点击 **新建**，点击 **数据库**，选择 **添加 PostgreSQL**。
- 在仪表盘上，选择你的 Umami 服务，进入 **Variables** 选项卡，点击 **新建变量**。
- 点击 **添加引用**，从你的 Postgres 数据库中选择 `DATABASE_URL` 变量。点击 **添加**。

添加数据库应该会触发重新部署，点击应用链接应该可以进入 Umami 实例的登录页面。

### 故障排除

如果 Railway 在你的仪表盘中显示 `Your project has no deploys`。

1. 在左下角选择 `Set up your project locally`。

2. 在 `umami` 根目录下按照弹出窗口中的指示操作。

- 使用 `railway login` 登录你的 Railway 账户。
- 使用 `railway link` 将你的项目与账户关联。
- 使用 `railway open` 打开你的项目仪表盘。
- 使用 `railway up` 上传和部署你的项目。

3. 从 [Login](/docs/login) 步骤开始，按照 **Getting started** 指南操作，并确保更改默认密码。

### 注意事项

- 在这里阅读更多关于[添加网站](https://umami.zhcndoc.com/docs/add-a-website)和[收集数据](https://umami.zhcndoc.com/docs/collect-data)的信息。
