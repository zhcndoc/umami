---
title: 在 CapRover 上运行
---

# 在 CapRover 上运行

[CapRover](https://caprover.com) 是一个非常易于使用的应用程序/数据库部署和 web 服务器管理器，适用于您的 NodeJS、Python、PHP、ASP.NET、Ruby、MySQL、MongoDB、PostgreSQL、WordPress（等等）应用程序！它使用 Docker、nginx、LetsEncrypt 和 NetData 在其简单易用的界面后面进行高速和稳定的操作。

- 自动化和脚本化的 CLI
- 便捷易用的 Web GUI
- 无锁定！移除 CapRover 后您的应用程序仍然可用!
- 使用 Docker Swarm 进行容器化和集群
- 使用 Nginx（完全可自定义的模板）进行负载均衡
- 使用 Let's Encrypt 提供免费 SSL（HTTPS）

## 设置

设置 CapRover Umami 相当简单，请按照以下步骤设置 Umami 在 CapRover 上:

### 1. 访问 CapRover 控制面板

登录到您现有的 CapRover 实例帐户，网址为 `captain.your-sub-domain.your-domain.xx`。

如果您没有现有的 CapRover 实例，请查看他们的文档：[CapRover - 入门](https://caprover.com/docs/get-started.html)。

### 2. 从模板创建应用

点击您的 CapRover 实例的 "Apps" 部分。然后选择 "One-Click Apps/Databases" 并搜索 Umami。您将会找到 3 个选项：

- `umami_postgresql` 会创建一个带有 PostgreSQL 数据库的 Umami。
- `umami_mysql` 会创建一个带有 MySQL 数据库的 Umami。
- `umami_only` 会单独创建一个 Umami 实例，您需要在自己的环境中运行数据库，然后在设置中提供数据库凭证。

### 3. 设置带有数据库的 Umami

在 CapRover One-Click Apps 中选择 `umami_postgresql` 或 `umami_mysql` 后，您将被提示一个设置页面，您可以在其中指定一些环境变量。请注意大多数环境变量都已经配置好了。

- `App 名称` 是您在 CapRover 中的 Umami 实例的显示名称。
- `PostgreSQL 或 MySQL 版本` 可以是 [PostgreSQL - Docker Hub](https://hub.docker.com/_/postgres) 或 [MYSQL - Docker Hub](https://hub.docker.com/_/mysql) 中可用的任何 PostgreSQL 或 MySQL 版本。默认值已经成功地测试过与 Umami 一起使用。
- `CapRover Umami 版本` 指的是在 [Umami release page](https://github.com/umami-software/umami/releases) 上找到的最新版本的 Umami。CapRover Umami 将使用为您选择的特定数据库发布的官方 Docker 镜像。您可以使用 `latest` 来构建最新版本的 Umami，而不是使用版本号例如 `v.1.33.x`。
- `数据库密码` 提供您数据库的密码。默认值已经准备好了。
- 可选：`Arguments for 'PostgreSQL initdb'` 您还可以提供 PostgreSQL initdb 的参数，例如 `--data-checksums`。该选项仅在 `umami_postgresql` 中可用。

现在只需点击 "Deploy" 以开始设置您的 CapRover Umami 实例和数据库服务。请不要离开页面，直到设置完成。

### 4. 无数据库服务的 Umami 设置

在某些情况下，您可能需要自行管理数据库服务，或者为您的 Umami 应用程序使用远程数据库服务。为此，您可以使用 `umami_only` CapRover 应用。

在设置此应用程序之前，请使用 MySQL 或 PostgreSQL 创建一个数据库服务。

在设置好数据库之后，在 CapRover 中点击 `umami_only`，并填写设置中的变量：

- `App 名称` 是您在 CapRover 中的 Umami 实例的显示名称。
- `CapRover Umami 版本` 指的是在 [Umami release page](https://github.com/umami-software/umami/releases) 上找到的最新版本的 Umami。CapRover Umami 将使用为您选择的特定数据库发布的官方 Docker 镜像。您可以使用 `latest` 来构建最新版本的 Umami。
- `数据库类型` 设置为 `postgresql` 或 `mysql`，根据您的数据库服务而定。
- `数据库远程 URL` 是 Umami 可以连接到数据库的数据库服务远程 URL。如果您的数据库在 CapRover 网络中，请使用 `srv-captain--appName`。
- `数据库用户` 是您的数据库用户。
- `数据库表` 是为 Umami 应用程序创建的表。
- `数据库密码` 是您的数据库密码。

现在只需点击 "Deploy" 以开始设置您的 CapRover Umami 实例。

请不要离开页面，直到设置完成。

### 4. 最后的检查

您现在可以通过 `app-name.your-sub-domain.your-domain.xx` 登录到 Umami 部署，如 [登录](/docs/login) 部分所述。请立即在个人资料页上更改密码。

### 5. 更新现有的 Umami 实例

在进行更新之前，请备份数据库。备份完成后，只需转到 CapRover 面板，选择您的 Umami 应用程序。转到 "Deployment" 选项卡，滚动到 "Deploy via ImageName" 并部署您想要的版本，来自 [Umami Docker Registry](https://github.com/umami-software/umami/pkgs/container/umami)。

注意：不要忘记根据您的数据库选择正确的 Docker 镜像。通常，MySQL 图像以 `mysql_` 为前缀，PostgreSQL 图像以 `postgresql_` 为前缀。

## 支持

在 [GitHub](https://github.com/caprover/one-click-apps/issues) 上创建一个问题。
