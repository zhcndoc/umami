---
title: 事件
---

关于事件和事件数据的操作。

**端点**

```text
GET /api/websites/:websiteId/events
GET /api/websites/:websiteId/event-data/:eventId
GET /api/websites/:websiteId/event-data/events
GET /api/websites/:websiteId/event-data/fields
GET /api/websites/:websiteId/event-data/properties
GET /api/websites/:websiteId/event-data/values
GET /api/websites/:websiteId/event-data/stats
```

---

## 过滤器

所有标记为 `filters` 的端点现在都可以使用以下参数进行过滤。

**参数**

- `path`：（字符串 | 可选）URL 名称。
- `referrer`：（字符串 | 可选）推荐来源名称。
- `title`：（字符串 | 可选）页面标题名称。
- `query`：（字符串 | 可选）查询参数名称。
- `browser`：（字符串 | 可选）浏览器名称。
- `os`：（字符串 | 可选）操作系统名称。
- `device`：（字符串 | 可选）设备名称（例如：移动设备）
- `country`：（字符串 | 可选）国家名称。
- `region`：（字符串 | 可选）区域/州/省名称。
- `city`：（字符串 | 可选）城市名称。
- `hostname`：（字符串 | 可选）主机名。
- `tag`：（字符串 | 可选）标签名称。
- `distinctId`：（字符串 | 可选）唯一 ID 名称。
- `segment`：（UUID | 可选）分段 UUID。
- `cohort`：（UUID | 可选）队列 UUID。

---

## GET /api/websites/:websiteId/events

获取指定时间范围内网站事件的详细信息。

**参数**

- `startAt`：（数字）起始日期的时间戳（毫秒）。
- `endAt`：（数字）结束日期的时间戳（毫秒）。
- `search`：（字符串 | 可选）搜索文本。
- `page`：（可选数字，默认 1）指定页码。
- `pageSize`：（数字 | 可选，默认 20）指定返回结果数量。
- `filters`：可以接受过滤参数。

**示例响应**

```json
{
  "data": [
    {
      "id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
      "websiteId": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
      "sessionId": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
      "createdAt": "2025-10-15T16:26:28Z",
      "hostname": "umami.is",
      "urlPath": "/docs/api",
      "urlQuery": "",
      "referrerPath": "",
      "referrerQuery": "",
      "referrerDomain": "",
      "country": "US",
      "city": "Scott",
      "device": "desktop",
      "os": "Mac OS",
      "browser": "chrome",
      "pageTitle": "API – Docs - Umami",
      "eventType": 1,
      "eventName": "",
      "hasData": 0
    },
    {
      "id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
      "websiteId": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
      "sessionId": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
      "createdAt": "2025-10-15T16:26:23Z",
      "hostname": "umami.is",
      "urlPath": "/docs/sessions",
      "urlQuery": "",
      "referrerPath": "/docs/distinct-ids",
      "referrerQuery": "",
      "referrerDomain": "umami.is",
      "country": "PL",
      "city": "Warsaw",
      "device": "desktop",
      "os": "Mac OS",
      "browser": "chrome",
      "pageTitle": "Sessions – Docs - Umami",
      "eventType": 2,
      "eventName": "login-button-header",
      "hasData": 0
    }
  ],
  "count": 2,
  "page": 1,
  "pageSize": 20
}
```

---

## GET /api/websites/:websiteId/event-data/:eventId

获取单个事件的事件数据。

**示例响应**

```json
[
  {
    "websiteId": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
    "sessionId": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
    "eventId": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
    "urlPath": "/",
    "eventName": "revenue-demo",
    "dataKey": "currency",
    "stringValue": "USD",
    "numberValue": null,
    "dateValue": null,
    "dataType": 1,
    "createdAt": "2025-10-10T12:31:03Z"
  },
  {
    "websiteId": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
    "sessionId": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
    "eventId": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
    "urlPath": "/",
    "eventName": "revenue-demo",
    "dataKey": "revenue",
    "stringValue": "40.0000",
    "numberValue": 40,
    "dateValue": null,
    "dataType": 2,
    "createdAt": "2025-10-10T12:31:03Z"
  }
]
```

---

## GET /api/websites/:websiteId/event-data/events

获取事件数据的名称、属性和计数。

**参数**

- `startAt`：（数字）起始日期的时间戳（毫秒）。
- `endAt`：（数字）结束日期的时间戳（毫秒）。
- `event`：（字符串 | 可选）事件名称过滤。
- `filters`：可以接受过滤参数。

**示例响应**

```json
[
  {
    "eventName": "button-click",
    "propertyName": "id",
    "dataType": 1,
    "total": 4
  },
  {
    "eventName": "button-click",
    "propertyName": "name",
    "dataType": 1,
    "total": 4
  },
  {
    "eventName": "track-product",
    "propertyName": "price",
    "dataType": 2,
    "total": 2
  }
]
```

---

## GET /api/websites/:websiteId/event-data/fields

获取指定时间范围内事件数据属性和值的计数。

**参数**

- `startAt`：（数字）起始日期的时间戳（毫秒）。
- `endAt`：（数字）结束日期的时间戳（毫秒）。
- `filters`：可以接受过滤参数。

**示例响应**

```json
[
  {
    "propertyName": "age",
    "dataType": 2,
    "value": "33",
    "total": 1
  },
  {
    "propertyName": "age",
    "dataType": 2,
    "value": "31",
    "total": 4
  },
  {
    "propertyName": "gender",
    "dataType": 1,
    "value": "female",
    "total": 4
  },
  {
    "propertyName": "gender",
    "dataType": 1,
    "value": "male",
    "total": 1
  }
]
```

---

## GET /api/websites/:websiteId/event-data/properties

获取网站的事件名称和属性计数。

**参数**

- `startAt`：（数字）起始日期的时间戳（毫秒）。
- `endAt`：（数字）结束日期的时间戳（毫秒）。
- `filters`：可以接受过滤参数。

**示例响应**

```json
[
  {
    "eventName": "revenue-demo",
    "propertyName": "revenue",
    "total": 122
  },
  {
    "eventName": "revenue-demo",
    "propertyName": "currency",
    "total": 122
  }
]
```

---

## GET /api/websites/:websiteId/event-data/values

获取指定事件及属性的事件数据计数。

**参数**

- `startAt`：（数字）起始日期的时间戳（毫秒）。
- `endAt`：（数字）结束日期的时间戳（毫秒）。
- `event`：（字符串）事件名称。
- `propertyName`：（字符串）属性名称。
- `filters`：可以接受过滤参数。

**示例响应**

```json
[
  {
    "value": "Male",
    "total": 28
  },
  {
    "value": "Female",
    "total": 26
  }
]
```

---

## GET /api/websites/:websiteId/event-data/stats

获取指定时间范围内网站事件、属性和记录的汇总信息。

**参数**

- `startAt`：（数字）起始日期的时间戳（毫秒）。
- `endAt`：（数字）结束日期的时间戳（毫秒）。
- `filters`：可以接受过滤参数。

**示例响应**

```json
[
  {
    "events": 16,
    "properties": 13,
    "records": 26
  }
]
```
